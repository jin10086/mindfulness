# 冥想音频生成器

一个基于Web的冥想音频生成工具，能够智能合成个性化的冥想音频，支持多种背景音和自定义时长。

## ✨ 功能特色

### 🎵 智能音频合成
- **背景音选择**：雨声 🌧️ 和海浪声 🌊 两种自然音效
- **自定义时长**：2-60分钟可调节
- **智能钵声**：在特定时间点自动插入钵声提醒
- **无缝循环**：背景音采用2秒交叉淡化技术，完全无缝衔接

### 🎛️ 用户体验
- **移动端适配**：响应式设计，完美支持手机和平板
- **记忆功能**：自动保存用户偏好设置，刷新页面后恢复
- **一键播放**：生成完成后自动开始播放
- **后台播放**：支持浏览器后台播放功能

### 🔊 音频技术
- **高品质输出**：44.1kHz采样率，立体声WAV格式
- **智能淡入淡出**：开头和结尾2秒平滑过渡
- **钵声处理**：自动截取8秒钵声，1秒淡入淡出效果
- **背景音静音**：钵声播放时背景音智能降低音量

## 🚀 快速开始

### 环境要求
- 现代浏览器（支持Web Audio API）
- Python 3.x（用于本地服务器）

### 安装运行

1. **克隆项目**
```bash
git clone <repository-url>
cd mindfulness1
```

2. **启动本地服务器**
```bash
python3 -m http.server 8000
```

3. **访问应用**
打开浏览器访问：`http://localhost:8000`

## 📁 项目结构

```
mindfulness1/
├── index.html          # 主页面文件
├── app.js             # 核心JavaScript逻辑
├── audio/             # 音频资源目录
│   ├── bowl.mp3       # 钵声音效
│   ├── rain.wav       # 雨声背景音
│   └── sea.wav        # 海浪声背景音
└── README.md          # 项目说明文档
```

## 🎯 使用方法

1. **选择背景音**：点击雨声或海浪声单选按钮
2. **设置时长**：输入2-60分钟的冥想时长
3. **生成音频**：点击"生成冥想音频"按钮
4. **开始冥想**：音频自动播放，享受冥想时光

## ⚙️ 技术实现

### 核心技术栈
- **前端**：HTML5, CSS3, JavaScript (ES6+)
- **音频处理**：Tone.js, Web Audio API
- **数据存储**：localStorage

### 音频合成算法
1. **背景音处理**：创建指定时长的无缝循环背景音
2. **钵声计算**：根据时长智能计算钵声插入时间点
   - 中间时间点：`(时长-1) / 2` 分钟
   - 结束时间点：`时长-1` 分钟
3. **音频混合**：使用OfflineAudioContext离线渲染
4. **格式转换**：转换为WAV格式供播放和下载

### 交叉淡化技术
- **循环边界**：2秒交叉淡化消除突兀感
- **钵声过渡**：1秒淡入淡出营造自然感
- **整体音频**：开头2秒淡入，结尾2秒淡出

## 🎨 界面设计

### 设计理念
- **简约风格**：清爽的界面设计，专注冥想体验
- **自然配色**：柔和的色彩搭配，营造宁静氛围
- **直观操作**：简单明了的交互流程

### 响应式布局
- **移动优先**：针对手机端优化的触控体验
- **自适应**：支持各种屏幕尺寸和设备方向
- **无障碍**：良好的可访问性设计

## 🔧 自定义配置

### 修改音频文件
替换 `audio/` 目录下的音频文件：
- `rain.wav` - 雨声背景音
- `sea.wav` - 海浪声背景音  
- `bowl.mp3` - 钵声音效

### 调整参数
在 `app.js` 中可以修改：
- 交叉淡化时长
- 钵声截取长度
- 淡入淡出时间
- 采样率设置

## 🌟 特色亮点

### 智能时间计算
根据冥想时长智能安排钵声提醒，确保最佳的冥想体验节奏。

### 无缝音频循环
采用先进的交叉淡化算法，让短音频文件无缝循环播放，听起来像完整的长音频。

### 用户偏好记忆
自动保存用户的选择偏好，提供个性化的使用体验。

### 移动端优化
专为移动设备优化的界面和交互，随时随地享受冥想。

## 📱 浏览器兼容性

- ✅ Chrome 66+
- ✅ Firefox 60+
- ✅ Safari 11.1+
- ✅ Edge 79+

## 🤝 贡献指南

欢迎提交Issue和Pull Request来改进这个项目！

## 📄 许可证

本项目采用 MIT 许可证。

---

**享受你的冥想时光！** 🧘‍♀️✨